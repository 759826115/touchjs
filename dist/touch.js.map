{"version":3,"sources":["touch.js"],"names":["touch","doc","exports","os","navigator","window","userAgent","android","match","ios","wp","isWebkit","test","isSafari","standalone","version","replace","ios7","ipad","iphone","iphone5","screen","height","ipod","wp8","webkit","safari","PCevts","utils","getType","obj","Object","prototype","toString","call","toLowerCase","getSelector","el","id","className","cns","split","join","document","tagName","matchSelector","target","selector","webkitMatchesSelector","getEventListeners","listeners","getPCevts","evt","forceReflow","domTreeOpDiv","getElementById","createElement","body","appendChild","parentNode","nextSibling","removeChild","insertBefore","simpleClone","JSON","parse","stringify","pos","start","move","end","startTime","startEvent","moveEvent","endEvent","startSwiping","startPinch","startDrag","__offset","__touchStart","__holdTimer","__tapped","__tapTimer","__scale_last_rate","__rotation_single_finger","__rotation_single_start","__initial_angle","__rotation","__prev_tapped_end_time","__prev_tapped_pos","proxyid","proxies","_trigger","detail","e","opt","bubbles","cancelable","CustomEvent","dispatchEvent","createEvent","initCustomEvent","_bind","handler","push","proxy","originEvent","startRotate","p","returnValue","stopPropagation","preventDefault","addEventListener","_unbind","handlers","length","forEach","removeEventListener","proxyids","_delegate","sel","integrateSelector","ischild","nodeName","_undelegate","config","tap","doubleTap","tapMaxDistance","hold","holdTime","maxDoubleTapInterval","swipe","swipeTime","swipeMinDistance","swipeFactor","drag","pinch","minScaleRate","minRotationAngle","_hasTouch","smrEventList","TOUCH_START","TOUCH_MOVE","TOUCH_END","TOUCH_CANCEL","MOUSE_DOWN","MOUSE_MOVE","MOUSE_UP","CLICK","PINCH_START","PINCH_END","PINCH","PINCH_IN","PINCH_OUT","ROTATION_LEFT","ROTATION_RIGHT","ROTATION","SWIPE_START","SWIPING","SWIPE_END","SWIPE_LEFT","SWIPE_RIGHT","SWIPE_UP","SWIPE_DOWN","SWIPE","DRAG","DRAGSTART","DRAGEND","HOLD","TAP","DOUBLE_TAP","getPosOfEvent","ev","posi","src","t","len","touches","x","pageX","y","pageY","getDistance","pos1","pos2","Math","sqrt","getFingers","calScale","pstart","pmove","disStart","disEnd","getAngle","p1","p2","atan2","PI","_getAngle180","agl","atan","getDirectionFromAngle","directions","up","down","left","right","key","getXYByElement","top","offsetParent","offsetLeft","offsetTop","reset","isTouchMove","type","isTouchEnd","gestures","_getAngleDiff","currentPos","diff","parseInt","count","abs","scale","rotation","eventObj","direction","fingersCount","fingerStatus","scaleEv","scale_diff","rotationEv","eventType","rotateSingleFinger","docOff","offsetWidth","offsetHeight","now","Date","touchTime","distance","position","angle","touchSecond","factor","distanceX","distanceY","duration","swipeTo","elt","clearTimeout","isDoubleTap","doubleDis","setTimeout","handlerOriginEvent","box","getBoundingClientRect","docEl","documentElement","pageYOffset","scrollTop","clientTop","pageXOffset","scrollLeft","clientLeft","_on","evts","evtMap","args","arguments","console","error","els","querySelectorAll","Array","slice","evtMapDelegate","evt1","evtMapBind","evt2","_off","keys","_dispatch","init","eventNames","on","off","bind","unbind","live","die","trigger"],"mappings":"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","file":"touch.js","sourcesContent":["var touch = touch || {};\n\n(function(doc, exports) {\n    'use strict';\n    var os = (function() {\n        var navigator = window.navigator,\n        userAgent = navigator.userAgent,\n        android = userAgent.match(/(Android)[\\s\\/]+([\\d\\.]+)/),\n        ios = userAgent.match(/(iPad|iPhone|iPod)\\s+OS\\s([\\d_\\.]+)/),\n        wp = userAgent.match(/(Windows\\s+Phone)\\s([\\d\\.]+)/),\n        isWebkit = /WebKit\\/[\\d.]+/i.test(userAgent),\n        isSafari = ios ? (navigator.standalone ? isWebkit: (/Safari/i.test(userAgent) && !/CriOS/i.test(userAgent) && !/MQQBrowser/i.test(userAgent))) : false,\n        os = {};\n\n        if (android) {\n            os.android = true;\n            os.version = android[2];\n        }\n        if (ios) {\n            os.ios = true;\n            os.version = ios[2].replace(/_/g, '.');\n            os.ios7 = /^7/.test(os.version);\n            if (ios[1] === 'iPad') {\n                os.ipad = true;\n            } else if (ios[1] === 'iPhone') {\n                os.iphone = true;\n                os.iphone5 = screen.height == 568;\n            } else if (ios[1] === 'iPod') {\n                os.ipod = true;\n            }\n        }\n        if (wp) {\n            os.wp = true;\n            os.version = wp[2];\n            os.wp8 = /^8/.test(os.version);\n        }\n        if (isWebkit) {\n            os.webkit = true;\n        }\n        if (isSafari) {\n            os.safari = true;\n        }\n\n        return os;\n    })();\n\n    var PCevts = {\n        'touchstart': 'mousedown',\n        'touchmove': 'mousemove',\n        'touchend': 'mouseup',\n        'touchcancel': 'mouseout'\n    };\n\n    var utils = {\n        getType: function(obj) {\n            return Object.prototype.toString.call(obj).match(/\\s([a-z|A-Z]+)/)[1].toLowerCase();\n        },\n        getSelector: function(el) {\n            if (el.id) {\n                return \"#\" + el.id;\n            }\n            if (el.className) {\n                var cns = el.className.split(/\\s+/);\n                return \".\" + cns.join(\".\");\n            } else if(el === document){\n                return \"body\";\n            }else{\n                return el.tagName.toLowerCase();\n            }\n        },\n        matchSelector: function(target, selector) {\n            return target.webkitMatchesSelector(selector);\n        },\n        getEventListeners: function(el) {\n            return el.listeners;\n        },\n        getPCevts: function(evt) {\n            return PCevts[evt] || evt;\n        },\n        forceReflow: function() {\n            var domTreeOpDiv = document.getElementById(\"domTreeOp\");\n            if (!domTreeOpDiv) {\n                domTreeOpDiv = document.createElement(\"div\");\n                domTreeOpDiv.id = \"domTreeOp\";\n                document.body.appendChild(domTreeOpDiv);\n            }\n            var parentNode = domTreeOpDiv.parentNode;\n            var nextSibling = domTreeOpDiv.nextSibling;\n            parentNode.removeChild(domTreeOpDiv);\n            parentNode.insertBefore(domTreeOpDiv, nextSibling);\n        },\n        simpleClone: function(obj){\n            return JSON.parse(JSON.stringify(obj));\n        }\n    };\n\n\n\n    var pos = {\n        start: null,\n        move: null,\n        end: null\n    };\n    var startTime = 0;\n    // var fingers = 0;\n    var startEvent = null;\n    var moveEvent = null;\n    var endEvent = null;\n    var startSwiping = false;\n    var startPinch = false;\n    var startDrag = false;\n\n    var __offset = {};\n    var __touchStart = false;\n    var __holdTimer = null;\n    var __tapped = false;\n    // var __lastTapEndTime = null;\n    var __tapTimer = null;\n\n    var __scale_last_rate = 1;\n    var __rotation_single_finger = false;\n    var __rotation_single_start = []; //元素坐标中心位置\n    var __initial_angle = 0;\n    var __rotation = 0;\n\n    var __prev_tapped_end_time = 0;\n    var __prev_tapped_pos = null;\n\n\n\n    /** 底层事件绑定/代理支持  */\n    var proxyid = 0;\n    var proxies = [];\n    var _trigger = function(el, evt, detail) {\n\n        detail = detail || {};\n        var e,\n            opt = {\n            bubbles: true,\n            cancelable: true,\n            detail: detail\n        };\n\n        if (typeof CustomEvent !== 'undefined') {\n            e = new CustomEvent(evt, opt);\n            if (el) {\n                el.dispatchEvent(e);\n            }\n        } else {\n            e = document.createEvent(\"CustomEvent\");\n            e.initCustomEvent(evt, true, true, detail);\n            if (el) {\n                el.dispatchEvent(e);\n            }\n        }\n    };\n\n    /**\n     * {DOM} element\n     * {String} eventName\n     * {Function} handler\n     */\n    var _bind = function(el, evt, handler) {\n        el.listeners = el.listeners || {};\n\n        if (!el.listeners[evt]) {\n            el.listeners[evt] = [handler];\n        } else {\n            el.listeners[evt].push(handler);\n        }\n        var proxy = function(e) {\n            if (os.ios7) {\n                utils.forceReflow();\n            }\n            e.originEvent = e;\n            e.startRotate = function() {\n                __rotation_single_finger = true;\n            };\n            for (var p in e.detail) {\n                if(p !== 'type'){\n                    e[p] = e.detail[p];\n                }\n            }\n            var returnValue = handler.call(e.target, e);\n            if(typeof returnValue !== \"undefined\" && !returnValue){\n                e.stopPropagation();\n                e.preventDefault();\n            }\n        };\n\n        handler.proxy = handler.proxy || {};\n        if (!handler.proxy[evt]) {\n            handler.proxy[evt] = [proxyid++];\n        } else {\n            handler.proxy[evt].push(proxyid++);\n        }\n        proxies.push(proxy);\n\n        if( el.addEventListener){ el.addEventListener(evt, proxy, false); }\n    };\n\n    /**\n     * {DOM} element\n     * {String} eventName\n     * {Function} the same handler of _bind\n     */\n    var _unbind = function(el, evt, handler) {\n        if (!handler) {\n            var handlers = el.listeners[evt];\n            if (handlers && handlers.length) {\n                handlers.forEach(function(handler) {\n                    el.removeEventListener(evt, handler, false);\n                });\n            }\n        } else {\n            var proxyids = handler.proxy[evt];\n            if (proxyids && proxyids.length) {\n                proxyids.forEach(function(proxyid) {\n                    if (el.removeEventListener) {\n                        el.removeEventListener(evt, proxies[proxyid], false);\n                    }\n                });\n            }\n        }\n    };\n\n    /**\n     * {DOM} delegate element\n     * {String} eventName\n     * {String} selector of sub elements\n     * {Function} handler\n     */\n    var _delegate = function(el, evt, sel, handler) {\n        var proxy = function(e) {\n            var target, returnValue;\n            e.originEvent = e;\n            e.startRotate = function() {\n                __rotation_single_finger = true;\n            };\n            for (var p in e.detail) {\n                if(p !== 'type'){\n                    e[p] = e.detail[p];\n                }\n            }\n            var integrateSelector = utils.getSelector(el) + \" \" + sel;\n            var match = utils.matchSelector(e.target, integrateSelector);\n            var ischild = utils.matchSelector(e.target, integrateSelector + \" \" + e.target.nodeName);\n            if (!match && ischild) {\n                if (os.ios7) {\n                    utils.forceReflow();\n                }\n                target = e.target;\n                while (!utils.matchSelector(target, integrateSelector)) {\n                    target = target.parentNode;\n                }\n                returnValue = handler.call(e.target, e);\n                if(typeof returnValue !== \"undefined\" && !returnValue){\n                    e.stopPropagation();\n                    e.preventDefault();\n                }\n            } else {\n                if (os.ios7) {\n                    utils.forceReflow();\n                }\n                if (match || ischild) {\n                    returnValue = handler.call(e.target, e);\n                    if(typeof returnValue !== \"undefined\" && !returnValue){\n                        e.stopPropagation();\n                        e.preventDefault();\n                    }\n                }\n            }\n        };\n\n        handler.proxy = handler.proxy || {};\n        if (!handler.proxy[evt]) {\n            handler.proxy[evt] = [proxyid++];\n        } else {\n            handler.proxy[evt].push(proxyid++);\n        }\n        proxies.push(proxy);\n\n        el.listeners = el.listeners || {};\n        if (!el.listeners[evt]) {\n            el.listeners[evt] = [proxy];\n        } else {\n            el.listeners[evt].push(proxy);\n        }\n        if(el.addEventListener){el.addEventListener(evt, proxy, false);}\n    };\n\n    /**\n     * {DOM} delegate element\n     * {String} eventName\n     * {String} selector of sub elements\n     * {Function} the same handler of _on\n     */\n    var _undelegate = function(el, evt, sel, handler) {\n        if (!handler) {\n            var listeners = el.listeners[evt];\n            listeners.forEach(function(proxy) {\n                el.removeEventListener(evt, proxy, false);\n            });\n        } else {\n            var proxyids = handler.proxy[evt];\n            if (proxyids.length) {\n                proxyids.forEach(function(proxyid) {\n                    if (el.removeEventListener) {\n                        el.removeEventListener(evt, proxies[proxyid], false);\n                    }\n                });\n            }\n        }\n    };\n\n    /** 手势识别 */\n    var config = {\n        tap: true,\n        doubleTap: true,\n        tapMaxDistance: 10,\n        hold: true,\n        holdTime: 650,\n        //ms\n        maxDoubleTapInterval: 300,\n\n        //swipe\n        swipe: true,\n        swipeTime: 300,\n        swipeMinDistance: 18,\n        swipeFactor: 5,\n\n        drag: true,\n        pinch: true,\n        minScaleRate: 0,\n        minRotationAngle: 0\n    };\n\n    var _hasTouch = ('ontouchstart' in window);\n    var smrEventList = {\n        TOUCH_START: 'touchstart',\n        TOUCH_MOVE: 'touchmove',\n        TOUCH_END: 'touchend',\n        TOUCH_CANCEL: 'touchcancel',\n\n        MOUSE_DOWN: 'mousedown',\n        MOUSE_MOVE: 'mousemove',\n        MOUSE_UP: 'mouseup',\n\n        CLICK: 'click',\n\n        //PINCH TYPE EVENT NAMES\n        PINCH_START: 'pinchstart',\n        PINCH_END: 'pinchend',\n        PINCH: 'pinch',\n        PINCH_IN: 'pinchin',\n        PINCH_OUT: 'pinchout',\n\n        ROTATION_LEFT: 'rotateleft',\n        ROTATION_RIGHT: 'rotateright',\n        ROTATION: 'rotate',\n\n        SWIPE_START: 'swipestart',\n        SWIPING: 'swiping',\n        SWIPE_END: 'swipeend',\n        SWIPE_LEFT: 'swipeleft',\n        SWIPE_RIGHT: 'swiperight',\n        SWIPE_UP: 'swipeup',\n        SWIPE_DOWN: 'swipedown',\n        SWIPE: 'swipe',\n\n        DRAG: 'drag',\n        DRAGSTART : 'dragstart',\n        DRAGEND : 'dragend',\n\n        //HOLD AND TAP  \n        HOLD: 'hold',\n        TAP: 'tap',\n        DOUBLE_TAP: 'doubletap'\n    };\n\n    /**\n     * 获取事件的位置信息\n     * @param  ev, 原生事件对象\n     * @return array  [{ x: int, y: int }]\n     */\n    function getPosOfEvent(ev) {\n        //多指触摸， 返回多个手势位置信息\n        if (_hasTouch) {\n            var posi = [];\n            var src = null;\n\n            for (var t = 0, len = ev.touches.length; t < len; t++) {\n                src = ev.touches[t];\n                posi.push({\n                    x: src.pageX,\n                    y: src.pageY\n                });\n            }\n            return posi;\n        } //处理PC浏览器的情况\n        else {\n            return [{\n                x: ev.pageX,\n                y: ev.pageY\n            }];\n        }\n    }\n    /**\n         *获取两点之间的距离\n         */\n    function getDistance(pos1, pos2) {\n        var x = pos2.x - pos1.x,\n        y = pos2.y - pos1.y;\n        return Math.sqrt((x * x) + (y * y));\n    }\n\n    /**\n     *计算事件的手势个数\n     *@param ev {Event}\n     */\n    function getFingers(ev) {\n        return ev.touches ? ev.touches.length: 1;\n    }\n    //计算收缩的比例\n    function calScale(pstart, pmove) {\n        if (pstart.length >= 2 && pmove.length >= 2) {\n            var disStart = getDistance(pstart[1], pstart[0]);\n            var disEnd = getDistance(pmove[1], pmove[0]);\n\n            return disEnd / disStart;\n        }\n        return 1;\n    }\n\n    //return 角度，范围为{-180-0，0-180}， 用来识别swipe方向。\n    function getAngle(p1, p2) {\n        return Math.atan2(p2.y - p1.y, p2.x - p1.x) * 180 / Math.PI;\n    }\n    //return 角度， 范围在{0-180}， 用来识别旋转角度\n    function _getAngle180(p1, p2) {\n        var agl = Math.atan((p2.y - p1.y) * -1 / (p2.x - p1.x)) * (180 / Math.PI);\n        return (agl < 0 ? (agl + 180) : agl);\n    }\n\n    //根据角度计算方位 \n    //@para agl {int} 是调用getAngle获取的。\n    function getDirectionFromAngle(agl) {\n        var directions = {\n            up: agl < -45 && agl > -135,\n            down: agl >= 45 && agl < 135,\n            left: agl >= 135 || agl <= -135,\n            right: agl >= -45 && agl <= 45\n        };\n        for (var key in directions) {\n            if (directions[key]) {\n                return key;\n            }\n        }\n        return null;\n    }\n\n    function getXYByElement(el) {\n        var left = 0,\n        top = 0;\n\n        while (el.offsetParent) {\n            left += el.offsetLeft;\n            top += el.offsetTop;\n            el = el.offsetParent;\n        }\n        return {\n            left: left,\n            top: top\n        };\n    }\n\n    function reset() {\n        startEvent = moveEvent = endEvent = null;\n        __tapped = __touchStart = startSwiping = startPinch = false;\n        startDrag = false;\n        pos = {};\n        __rotation_single_finger = false;\n    }\n\n    // function isTouchStart(ev) {\n    //     // ev.preventDefault();\n    //     return (ev.type === 'touchstart' || ev.type === 'mousedown');\n    // }\n    function isTouchMove(ev) {\n        // ev.preventDefault();\n        return (ev.type === 'touchmove' || ev.type === 'mousemove');\n    }\n    function isTouchEnd(ev) {\n        return (ev.type === 'touchend' || ev.type === 'mouseup' || ev.type === 'touchcancel');\n    }\n\n    \n\n    var gestures = {\n        _getAngleDiff: function(currentPos) {\n            var diff = parseInt(__initial_angle - _getAngle180(currentPos[0], currentPos[1]), 10);\n            var count = 0;\n\n            while (Math.abs(diff - __rotation) > 90 && count++<50) {\n                if (__rotation < 0) {\n                    diff -= 180;\n                } else {\n                    diff += 180;\n                }\n            }\n            __rotation = parseInt(diff, 10);\n            return __rotation;\n        },\n        pinch: function(ev) {\n            var el = ev.target;\n            if (config.pinch) {\n                //touchend进入此时的getFinger(ev) < 2\n                if (!__touchStart) {\n                    return;\n                }\n                if (getFingers(ev) < 2) {\n                    if (!isTouchEnd(ev)) {\n                        return;\n                    }\n                }\n                var scale = calScale(pos.start, pos.move);\n                var rotation = this._getAngleDiff(pos.move);\n                var eventObj = {\n                    type: '',\n                    originEvent: ev,\n                    scale: scale,\n                    rotation: rotation,\n                    direction: (rotation > 0 ? 'right': 'left'),\n                    fingersCount: getFingers(ev)\n                };\n                if (!startPinch) {\n                    startPinch = true;\n                    eventObj.fingerStatus = \"start\";\n                    _trigger(el, smrEventList.PINCH_START, eventObj);\n                } else if (isTouchMove(ev)) {\n                    eventObj.fingerStatus = \"move\";\n                    _trigger(el, smrEventList.PINCH, eventObj);\n                } else if (isTouchEnd(ev)) {\n                    eventObj.fingerStatus = \"end\";\n                    _trigger(el, smrEventList.PINCH_END, eventObj);\n                    reset();\n                }\n\n                if (Math.abs(1 - scale) > config.minScaleRate) {\n                    var scaleEv = utils.simpleClone(eventObj);\n\n                    //手势放大, 触发pinchout事件\n                    var scale_diff = 0.00000000001; //防止touchend的scale与__scale_last_rate相等，不触发事件的情况。\n                    if (scale > __scale_last_rate) {\n                        __scale_last_rate = scale - scale_diff;\n                        _trigger(el, smrEventList.PINCH_OUT, scaleEv, false);\n                    } //手势缩小,触发pinchin事件\n                    else if (scale < __scale_last_rate) {\n                        __scale_last_rate = scale + scale_diff;\n                        _trigger(el, smrEventList.PINCH_IN, scaleEv, false);\n                    }\n\n                    if (isTouchEnd(ev)) {\n                        __scale_last_rate = 1;\n                    }\n                }\n\n                if (Math.abs(rotation) > config.minRotationAngle) {\n                    var rotationEv = utils.simpleClone(eventObj), eventType;\n\n                    eventType = rotation > 0 ? smrEventList.ROTATION_RIGHT: smrEventList.ROTATION_LEFT;\n                    _trigger(el, eventType, rotationEv, false);\n                    _trigger(el, smrEventList.ROTATION, eventObj);\n                }\n\n            }\n        },\n        rotateSingleFinger: function(ev) {\n            var el = ev.target;\n            if (__rotation_single_finger && getFingers(ev) < 2) {\n                if (!pos.move) {\n                    return;\n                }\n                if (__rotation_single_start.length < 2) {\n                    var docOff = getXYByElement(el);\n\n                    __rotation_single_start = [{\n                        x: docOff.left + el.offsetWidth / 2,\n                        y: docOff.top + el.offsetHeight / 2\n                    },\n                    pos.move[0]];\n                    __initial_angle = parseInt(_getAngle180(__rotation_single_start[0], __rotation_single_start[1]), 10);\n                }\n                var move = [__rotation_single_start[0], pos.move[0]];\n                var rotation = this._getAngleDiff(move);\n                var eventObj = {\n                    type: '',\n                    originEvent: ev,\n                    rotation: rotation,\n                    direction: (rotation > 0 ? 'right': 'left'),\n                    fingersCount: getFingers(ev)\n                };\n\n                if (isTouchMove(ev)) {\n                    eventObj.fingerStatus = \"move\";\n                } else if (isTouchEnd(ev) || ev.type === 'mouseout') {\n                    eventObj.fingerStatus = \"end\";\n                    _trigger(el, smrEventList.PINCH_END, eventObj);\n                    reset();\n                }\n\n                var eventType = rotation > 0 ? smrEventList.ROTATION_RIGHT: smrEventList.ROTATION_LEFT;\n                _trigger(el, eventType, eventObj);\n                _trigger(el, smrEventList.ROTATION, eventObj);\n            }\n        },\n        swipe: function(ev) {\n            //目前swipe只存在一个手势上\n            var el = ev.target;\n            if (!__touchStart || !pos.move || getFingers(ev) > 1) {\n                return;\n            }\n\n            var now = Date.now();\n            var touchTime = now - startTime;\n            var distance = getDistance(pos.start[0], pos.move[0]);\n            var position = {\n                x: pos.move[0].x - __offset.left,\n                y: pos.move[0].y - __offset.top\n            };\n            var angle = getAngle(pos.start[0], pos.move[0]);\n            var direction = getDirectionFromAngle(angle);\n            var touchSecond = touchTime / 1000;\n            var factor = ((10 - config.swipeFactor) * 10 * touchSecond * touchSecond);\n            var eventObj = {\n                type: smrEventList.SWIPE,\n                //DEFAULT: smrEventList.SWIPE event.\n                originEvent: ev,\n                position: position,\n                direction: direction,\n                distance: distance,\n                distanceX: pos.move[0].x - pos.start[0].x,\n                distanceY: pos.move[0].y - pos.start[0].y,\n                x : pos.move[0].x - pos.start[0].x,\n                y : pos.move[0].y - pos.start[0].y,\n                angle: angle,\n                duration: touchTime,\n                fingersCount: getFingers(ev),\n                factor: factor\n            };\n            if (config.swipe) {\n                var swipeTo = function() {\n                    var elt = smrEventList;\n                    switch (direction) {\n                    case 'up':\n                        _trigger(el, elt.SWIPE_UP, eventObj);\n                        break;\n                    case 'down':\n                        _trigger(el, elt.SWIPE_DOWN, eventObj);\n                        break;\n                    case 'left':\n                        _trigger(el, elt.SWIPE_LEFT, eventObj);\n                        break;\n                    case 'right':\n                        _trigger(el, elt.SWIPE_RIGHT, eventObj);\n                        break;\n                    }\n                };\n\n                if (!startSwiping) {\n                    eventObj.fingerStatus = eventObj.swipe = 'start';\n                    startSwiping = true;\n                    _trigger(el, smrEventList.SWIPE_START, eventObj);\n                } else if (isTouchMove(ev)) {\n                    // test\n                    ev.preventDefault();\n                    \n                    eventObj.fingerStatus = eventObj.swipe = 'move';\n                    _trigger(el, smrEventList.SWIPING, eventObj);\n\n                    if (touchTime > config.swipeTime && touchTime < config.swipeTime + 50 && distance > config.swipeMinDistance) {\n                        swipeTo();\n                        _trigger(el, smrEventList.SWIPE, eventObj, false);\n                    }\n                } else if (isTouchEnd(ev) || ev.type === 'mouseout') {\n                    eventObj.fingerStatus = eventObj.swipe = 'end';\n                    _trigger(el, smrEventList.SWIPE_END, eventObj);\n\n                    if (config.swipeTime > touchTime && distance > config.swipeMinDistance) {\n                        swipeTo();\n                        _trigger(el, smrEventList.SWIPE, eventObj, false);\n                    }\n                }\n            }\n\n            if (config.drag) {\n                if (!startDrag) {\n                    eventObj.fingerStatus = eventObj.swipe = 'start';\n                    startDrag = true;\n                    _trigger(el, smrEventList.DRAGSTART, eventObj);\n                } else if (isTouchMove(ev)) {\n                    eventObj.fingerStatus = eventObj.swipe = 'move';\n                    _trigger(el, smrEventList.DRAG, eventObj);\n                } else if (isTouchEnd(ev)) {\n                    eventObj.fingerStatus = eventObj.swipe = 'end';\n                    _trigger(el, smrEventList.DRAGEND, eventObj);\n                }\n                \n            }\n        },\n        tap: function(ev) {\n            var el = ev.target;\n            if (config.tap) {\n                var now = Date.now();\n                var touchTime = now - startTime;\n                var distance = getDistance(pos.start[0], pos.move ? pos.move[0] : pos.start[0]);\n\n                clearTimeout(__holdTimer); //去除hold事件\n                var isDoubleTap = (function() {\n                    if (__prev_tapped_pos && \n                        config.doubleTap && \n                        (startTime - __prev_tapped_end_time) < config.maxDoubleTapInterval) \n                    {\n                        var doubleDis = getDistance(__prev_tapped_pos, pos.start[0]);\n                        if (doubleDis < 16) {\n                            return true;\n                        }\n                    }\n                    return false;\n                })();\n\n                if (isDoubleTap) {\n                    clearTimeout(__tapTimer);\n                    _trigger(el, smrEventList.DOUBLE_TAP, {\n                        type: smrEventList.DOUBLE_TAP,\n                        originEvent: ev,\n                        position: pos.start[0]\n                    });\n                    return;\n                }\n\n                if (config.tapMaxDistance < distance) {\n                    return;\n                }\n\n                if (config.holdTime > touchTime && \n                    getFingers(ev) <= 1) \n                {\n                    //clearTimeout在ios上有时不work（alert引起的）， 先用__tapped顶一下\n                    __tapped = true;\n                    __prev_tapped_end_time = now;\n                    __prev_tapped_pos = pos.start[0];\n                    __tapTimer = setTimeout(function(){\n                        _trigger(el, smrEventList.TAP, {\n                            type: smrEventList.TAP,\n                            originEvent: ev,\n                            fingersCount: getFingers(ev),\n                            position: __prev_tapped_pos\n                        });\n                    }, 220);\n                }\n            }\n        },\n        hold: function(ev) {\n            var el = ev.target;\n            if (config.hold) {\n                clearTimeout(__holdTimer);\n\n                __holdTimer = setTimeout(function() {\n                    if (!pos.start) {\n                        return;\n                    }\n                    var distance = getDistance(pos.start[0], pos.move ? pos.move[0] : pos.start[0]);\n                    if (config.tapMaxDistance < distance) {\n                        return;\n                    }\n\n                    if (!__tapped) {\n                        _trigger(el, \"hold\", {\n                            type: 'hold',\n                            originEvent: ev,\n                            fingersCount: getFingers(ev),\n                            position: pos.start[0]\n                        });\n                    }\n                },\n                config.holdTime);\n            }\n        }\n    };\n\n    var handlerOriginEvent = function(ev) {\n\n        var el = ev.target;\n        switch (ev.type) {\n        case 'touchstart':\n        case 'mousedown':\n            //__rotation_single_finger = false;\n            __rotation_single_start = [];\n            __touchStart = true;\n            if (!pos.start || pos.start.length < 2) {\n                pos.start = getPosOfEvent(ev);\n            }\n            if (getFingers(ev) >= 2) {\n                __initial_angle = parseInt(_getAngle180(pos.start[0], pos.start[1]), 10);\n            }\n\n            startTime = Date.now();\n            startEvent = ev;\n            __offset = {};\n            \n            var box = el.getBoundingClientRect();\n            var docEl = document.documentElement;\n            __offset = {\n                top: box.top + (window.pageYOffset || docEl.scrollTop) - (docEl.clientTop || 0),\n                left: box.left + (window.pageXOffset || docEl.scrollLeft) - (docEl.clientLeft || 0)\n            };\n\n            gestures.hold(ev);\n            break;\n        case 'touchmove':\n        case 'mousemove':\n            if (!__touchStart || !pos.start) {\n                return;\n            }\n            pos.move = getPosOfEvent(ev);\n            if (getFingers(ev) >= 2) {\n                gestures.pinch(ev);\n            } else if (__rotation_single_finger) {\n                gestures.rotateSingleFinger(ev);\n            } else {\n                gestures.swipe(ev);\n            }\n            break;\n        case 'touchend':\n        case 'touchcancel':\n        case 'mouseup':\n        case 'mouseout':\n            if (!__touchStart) {\n                return;\n            }\n            endEvent = ev;\n\n            if (startPinch) {\n                gestures.pinch(ev);\n            } else if (__rotation_single_finger) {\n                gestures.rotateSingleFinger(ev);\n            } else if (startSwiping) {\n                gestures.swipe(ev);\n            } else {\n                gestures.tap(ev);\n            }\n\n            reset();\n            __initial_angle = 0;\n            __rotation = 0;\n            if (ev.touches && ev.touches.length === 1) {\n                __touchStart = true;\n                __rotation_single_finger = true;\n            }\n            break;\n        }\n    };\n\n    /**\n    开发者接口\n    usage:\n        touch.on(\"#test\", \"tap swipeleft swiperight\", handler);\n        touch.trigger(\"#test\", \"tap\");\n        touch.off(\"#test\", \"tap swipeleft swiperight\", handler);\n     */\n    var _on = function() {\n\n        var evts, handler, evtMap, sel, args = arguments;\n        if (args.length < 2 || args > 4) {\n            return console.error(\"unexpected arguments!\");\n        }\n        var els = utils.getType(args[0]) === 'string' ? doc.querySelectorAll(args[0]) : args[0];\n        els = els.length ? Array.prototype.slice.call(els) : [els];\n        //事件绑定\n        if (args.length === 3 && utils.getType(args[1]) === 'string') {\n            evts = args[1].split(\" \");\n            handler = args[2];\n            evts.forEach(function(evt) {\n                if (!_hasTouch) {\n                    evt = utils.getPCevts(evt);\n                }\n                els.forEach(function(el) {\n                    _bind(el, evt, handler);\n                });\n            });\n            return;\n        }\n        \n        function evtMapDelegate( evt ){\n            if (!_hasTouch) {\n                evt = utils.getPCevts(evt);\n            }\n            els.forEach(function(el) {\n                _delegate(el, evt, sel, evtMap[evt]);\n            });\n        }\n        //mapEvent delegate\n        if (args.length === 3 && utils.getType(args[1]) === 'object') {\n            evtMap = args[1];\n            sel = args[2];\n            for (var evt1 in evtMap) {\n                evtMapDelegate(evt1);\n            }\n            return;\n        }\n        \n        function evtMapBind(evt){\n            if (!_hasTouch) {\n                evt = utils.getPCevts(evt);\n            }\n            els.forEach(function(el) {\n                _bind(el, evt, evtMap[evt]);\n            });\n        }\n        \n        //mapEvent bind\n        if (args.length === 2 && utils.getType(args[1]) === 'object') {\n            evtMap = args[1];\n            for (var evt2 in evtMap) {\n                evtMapBind(evt2);\n            }\n            return;\n        }\n\n        //兼容factor config\n        if (args.length === 4 && utils.getType(args[2]) === \"object\") {\n            evts = args[1].split(\" \");\n            handler = args[3];\n            evts.forEach(function(evt) {\n                if (!_hasTouch) {\n                    evt = utils.getPCevts(evt);\n                }\n                els.forEach(function(el) {\n                    _bind(el, evt, handler);\n                });\n            });\n            return;\n        }\n\n        //事件代理\n        if (args.length === 4) {\n            var el = els[0];\n            evts = args[1].split(\" \");\n            sel = args[2];\n            handler = args[3];\n            evts.forEach(function(evt) {\n                if (!_hasTouch) {\n                    evt = utils.getPCevts(evt);\n                }\n                _delegate(el, evt, sel, handler);\n            });\n            return;\n        }\n    };\n\n    var _off = function() {\n        var evts, handler;\n        var args = arguments;\n        if (args.length < 1 || args.length > 4) {\n            return console.error(\"unexpected arguments!\");\n        }\n        var els = utils.getType(args[0]) === 'string' ? doc.querySelectorAll(args[0]) : args[0];\n        els = els.length ? Array.prototype.slice.call(els) : [els];\n\n        if (args.length === 1 || args.length === 2) {\n            els.forEach(function(el) {\n                evts = args[1] ? args[1].split(\" \") : Object.keys(el.listeners);\n                if (evts.length) {\n                    evts.forEach(function(evt) {\n                        if (!_hasTouch) {\n                            evt = utils.getPCevts(evt);\n                        }\n                        _unbind(el, evt);\n                        _undelegate(el, evt);\n                    });\n                }\n            });\n            return;\n        }\n\n        if (args.length === 3 && utils.getType(args[2]) === 'function') {\n            handler = args[2];\n            els.forEach(function(el) {\n                evts = args[1].split(\" \");\n                evts.forEach(function(evt) {\n                    if (!_hasTouch) {\n                        evt = utils.getPCevts(evt);\n                    }\n                    _unbind(el, evt, handler);\n                });\n            });\n            return;\n        }\n\n        if (args.length === 3 && utils.getType(args[2]) === 'string') {\n            var sel = args[2];\n            els.forEach(function(el) {\n                evts = args[1].split(\" \");\n                evts.forEach(function(evt) {\n                    if (!_hasTouch) {\n                        evt = utils.getPCevts(evt);\n                    }\n                    _undelegate(el, evt, sel);\n                });\n            });\n            return;\n        }\n\n        if (args.length === 4) {\n            handler = args[3];\n            els.forEach(function(el) {\n                evts = args[1].split(\" \");\n                evts.forEach(function(evt) {\n                    if (!_hasTouch) {\n                        evt = utils.getPCevts(evt);\n                    }\n                    _undelegate(el, evt, sel, handler);\n                });\n            });\n            return;\n        }\n    };\n\n    var _dispatch = function(el, evt, detail) {\n        var args = arguments;\n        if (!_hasTouch) {\n            evt = utils.getPCevts(evt);\n        }\n        var els = utils.getType(args[0]) === 'string' ? doc.querySelectorAll(args[0]) : args[0];\n        els = els.length ? Array.prototype.call(els) : [els];\n\n        els.forEach(function(el) {\n            _trigger(el, evt, detail);\n        });\n    };\n\n    //init gesture\n    function init() {\n        var eventNames = _hasTouch ? 'touchstart touchmove touchend touchcancel': 'mouseup mousedown mousemove mouseout';\n        _on(doc, eventNames, handlerOriginEvent);\n    }\n\n    init();\n\n    exports.on = _on;\n    exports.off = _off;\n    exports.bind = _on;\n    exports.unbind = _off;\n    exports.live = _on;\n    exports.die = _off;\n    exports.config = config;\n    exports.trigger = _dispatch;\n\n})(document, touch);\n\n// module.exports = touch;\nexport default touch;"]}